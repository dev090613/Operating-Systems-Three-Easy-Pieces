> 시스템 콜은 내부에서 trap 명령어를 호출한다. 이 경우 trap이 운영체제 코드의 어디를 실행할지 어떻게 알까?
>
> 커널은 부팅 시에 trap table을 만들고 초기화 시킨다. trap table은 trap handler의 위치를 테이블 형태로 담고 있다. 
>
> trap 발생 시 CPU는 trap 번호를 이용해 trap table에서 trap handler의 주소를 찾아 실행한다.(CPU는 레지스터에 trap table의 base address를 담고 있음
>
> 따라서 시스템 콜과 같은 예외적인 사건이 발생했을 때 하드웨어(CPU)는 무엇을 해야 할지 알 수 있다.



>  문맥 교환(context switch)의 개념 + 커널 스택
>
> Context switch
>
> 저장: 현재 실행 중인 프로세스의 레지스터 값들 -> 커널 스택
>
> 복원: 실행할 프로세스의 커널 스택에 저장된 레지스터 값들 -> CPU 레지스터

> 커널 스택
>
> - 프로세스가 커널 모드에서 실행될 때 사용하는 메모리 영역
> - 시스템 콜이나 인터럽트 처리 시 필요한 임시 데이터를 저장
> - 각 프로세스마다 가지고 있다.
> - 커널 영역에 위치한다.